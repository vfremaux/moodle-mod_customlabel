{"version":3,"file":"customlabel.min.js","sources":["../src/customlabel.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n// jshint undef:false, unused:false, scripturl:true\n\n/**\n * @module     customlabeltype_verticalspacer\n * @package    customlabeltype\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'core/config', 'core/log'], function($, cfg, log) {\n\n    var customboxverticalspacer = {\n\n        catched: 0,\n\n        verticalspacerlocation: [],\n\n        verticalspacerpagelocation: [],\n\n        init: function() {\n            $('.custombox-verticalspacer-handle').off();\n            $('.custombox-verticalspacer-handle').bind('mousedown', this.mousedown);\n            $('.custombox-verticalspacer-handle').bind('mouseup', this.mouseup);\n            $('.custombox-verticalspacer-handle').bind('mousemove', this.mousemove);\n\n            log.debug('AMD customlabel verticalspacer initialized');\n        },\n\n        mousedown: function(e) {\n\n            var that = $(this);\n            log.debug('Catching ' + that.attr('id'));\n            var fullid = that.attr('id').replace('verticalspacer-handle-', '');\n            var spacerid = 'custombox-verticalspacer-' + fullid;\n            var parts = fullid.split('-');\n            var customid = parts[1];\n\n            var spacerheight = $('#' + spacerid).css('height').replace(/em|px/, '');\n            customboxverticalspacer.verticalspacerlocation[customid] = parseInt(spacerheight);\n            customboxverticalspacer.verticalspacerpagelocation[customid] = e.pageY;\n            customboxverticalspacer.catched = true;\n            e.stopImmediatePropagation();\n            return false;\n        },\n\n        mouseup: function(e) {\n\n            var that = $(this);\n            log.debug('Releasing ' + that.attr('id'));\n            var fullid = that.attr('id').replace('custombox-verticalspacer-', '');\n            var parts = fullid.split('-');\n            var courseid = parts[0];\n            var customid = parts[1];\n\n            customboxverticalspacer.verticalspacerlocation[customid] = 0;\n            customboxverticalspacer.verticalspacerpagelocation[customid] = 0;\n            customboxverticalspacer.catched = false;\n\n            // Send actualized value to server.\n            var height = that.css('height');\n            var url = cfg.wwwroot + '/mod/customlabel/type/verticalspacer/ajax/service.php';\n            url += '?id=' + courseid;\n            url += '&cid=' + customid;\n            url += '&height=' + height.replace(/em|px/, '');\n\n            $.get(url);\n            e.stopImmediatePropagation();\n            return false;\n        },\n\n        mousemove: function(e) {\n\n            if (!customboxverticalspacer.catched) {\n                return;\n            }\n\n            var that = $(this);\n            log.debug('Moving ' + that.attr('id'));\n            var fullid = that.attr('id').replace('verticalspacer-handle-', '');\n            var parts = fullid.split('-');\n            var spacerid = 'custombox-verticalspacer-' + fullid;\n            var customid = parts[1];\n            var dist, height, newheight;\n\n            if (customboxverticalspacer.verticalspacerlocation[customid] != 0) {\n                dist = e.pageY - customboxverticalspacer.verticalspacerpagelocation[customid];\n                height = customboxverticalspacer.verticalspacerlocation[customid];\n                newheight = (height + dist) + 'px';\n                $('#' + spacerid).css('height', newheight);\n            }\n            e.stopImmediatePropagation();\n            return false;\n        }\n    };\n\n    return customboxverticalspacer;\n});\n"],"names":["define","$","cfg","log","customboxverticalspacer","catched","verticalspacerlocation","verticalspacerpagelocation","init","off","bind","this","mousedown","mouseup","mousemove","debug","e","that","attr","fullid","replace","spacerid","customid","split","spacerheight","css","parseInt","pageY","stopImmediatePropagation","parts","courseid","height","url","wwwroot","get","dist","newheight"],"mappings":";;;;;AAsBAA,oDAAO,CAAC,SAAU,cAAe,aAAa,SAASC,EAAGC,IAAKC,SAEvDC,wBAA0B,CAE1BC,QAAS,EAETC,uBAAwB,GAExBC,2BAA4B,GAE5BC,KAAM,WACFP,EAAE,oCAAoCQ,MACtCR,EAAE,oCAAoCS,KAAK,YAAaC,KAAKC,WAC7DX,EAAE,oCAAoCS,KAAK,UAAWC,KAAKE,SAC3DZ,EAAE,oCAAoCS,KAAK,YAAaC,KAAKG,WAE7DX,IAAIY,MAAM,+CAGdH,UAAW,SAASI,OAEZC,KAAOhB,EAAEU,MACbR,IAAIY,MAAM,YAAcE,KAAKC,KAAK,WAC9BC,OAASF,KAAKC,KAAK,MAAME,QAAQ,yBAA0B,IAC3DC,SAAW,4BAA8BF,OAEzCG,SADQH,OAAOI,MAAM,KACJ,GAEjBC,aAAevB,EAAE,IAAMoB,UAAUI,IAAI,UAAUL,QAAQ,QAAS,WACpEhB,wBAAwBE,uBAAuBgB,UAAYI,SAASF,cACpEpB,wBAAwBG,2BAA2Be,UAAYN,EAAEW,MACjEvB,wBAAwBC,SAAU,EAClCW,EAAEY,4BACK,GAGXf,QAAS,SAASG,OAEVC,KAAOhB,EAAEU,MACbR,IAAIY,MAAM,aAAeE,KAAKC,KAAK,WAE/BW,MADSZ,KAAKC,KAAK,MAAME,QAAQ,4BAA6B,IAC/CG,MAAM,KACrBO,SAAWD,MAAM,GACjBP,SAAWO,MAAM,GAErBzB,wBAAwBE,uBAAuBgB,UAAY,EAC3DlB,wBAAwBG,2BAA2Be,UAAY,EAC/DlB,wBAAwBC,SAAU,MAG9B0B,OAASd,KAAKQ,IAAI,UAClBO,IAAM9B,IAAI+B,QAAU,+DACxBD,KAAO,OAASF,SAChBE,KAAO,QAAUV,SACjBU,KAAO,WAAaD,OAAOX,QAAQ,QAAS,IAE5CnB,EAAEiC,IAAIF,KACNhB,EAAEY,4BACK,GAGXd,UAAW,SAASE,MAEXZ,wBAAwBC,aAIzBY,KAAOhB,EAAEU,MACbR,IAAIY,MAAM,UAAYE,KAAKC,KAAK,WAK5BiB,KAAcC,UAJdjB,OAASF,KAAKC,KAAK,MAAME,QAAQ,yBAA0B,IAC3DS,MAAQV,OAAOI,MAAM,KACrBF,SAAW,4BAA8BF,OACzCG,SAAWO,MAAM,UAG2C,GAA5DzB,wBAAwBE,uBAAuBgB,YAC/Ca,KAAOnB,EAAEW,MAAQvB,wBAAwBG,2BAA2Be,UAEpEc,UADShC,wBAAwBE,uBAAuBgB,UAClCa,KAAQ,KAC9BlC,EAAE,IAAMoB,UAAUI,IAAI,SAAUW,YAEpCpB,EAAEY,4BACK,YAIRxB,uBACV"}