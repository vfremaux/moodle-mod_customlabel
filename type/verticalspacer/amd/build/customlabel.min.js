define(["jquery","core/config","core/log"],function(a,b,c){var d={catched:0,verticalspacerlocation:[],verticalspacerpagelocation:[],init:function(){a(".custombox-verticalspacer-handle").off(),a(".custombox-verticalspacer-handle").bind("mousedown",this.mousedown),a(".custombox-verticalspacer-handle").bind("mouseup",this.mouseup),a(".custombox-verticalspacer-handle").bind("mousemove",this.mousemove),c.debug("AMD customlabel verticalspacer initialized")},mousedown:function(b){var e=a(this);c.debug("Catching "+e.attr("id"));var f=e.attr("id").replace("verticalspacer-handle-",""),g="custombox-verticalspacer-"+f,h=f.split("-"),i=h[1],j=a("#"+g).css("height").replace(/em|px/,"");return d.verticalspacerlocation[i]=parseInt(j),d.verticalspacerpagelocation[i]=b.pageY,d.catched=!0,b.stopImmediatePropagation(),!1},mouseup:function(e){var f=a(this);c.debug("Releasing "+f.attr("id"));var g=f.attr("id").replace("custombox-verticalspacer-",""),h=g.split("-"),i=h[0],j=h[1];d.verticalspacerlocation[j]=0,d.verticalspacerpagelocation[j]=0,d.catched=!1;var k=f.css("height"),l=b.wwwroot+"/mod/customlabel/type/verticalspacer/ajax/service.php";return l+="?id="+i,l+="&cid="+j,l+="&height="+k.replace(/em|px/,""),a.get(l),e.stopImmediatePropagation(),!1},mousemove:function(b){if(d.catched){var e=a(this);c.debug("Moving "+e.attr("id"));var f,g,h,i=e.attr("id").replace("verticalspacer-handle-",""),j=i.split("-"),k="custombox-verticalspacer-"+i,l=j[1];return 0!=d.verticalspacerlocation[l]&&(f=b.pageY-d.verticalspacerpagelocation[l],g=d.verticalspacerlocation[l],h=g+f+"px",a("#"+k).css("height",h)),b.stopImmediatePropagation(),!1}}};return d});