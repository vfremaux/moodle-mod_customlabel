{"version":3,"file":"customlabel.min.js","sources":["../src/customlabel.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n// jshint unused: true, undef:true\n\ndefine(['jquery', 'core/log', 'core/config'], function($, log, cfg) {\n\n    customboxquestion = {\n\n        init: function() {\n            $('.custombox-qcm-btn').bind('click', this.submitquestion);\n\n            log.debug('AMD customlabel question initialized.');\n        },\n\n        submitquestion: function() {\n\n            var that = $(this);\n\n            var cmid = that.attr('name').replace('custombox-qcm-btn-', '');\n            var answers = $('.custombox-qcm-input-' + cmid + ' :checked');\n\n            var aid = 0;\n            if (answers.length > 0) {\n                var answer = answers.first();\n                aid = answer.attr('value');\n            }\n\n            // Send data to submission.\n            var url = cfg.wwwroot + '/mod/customlabel/type/question/ajax/service.php';\n            url += '?what=submit';\n            url += '&cmid=' + cmid;\n            url += '&answernum=' + aid;\n\n            $('.custombox-qcm-answer-' + cmid).removeClass('correct');\n            $('.custombox-qcm-answer-' + cmid).removeClass('incorrect');\n\n            $.get(url, function(data){\n                // Reset all answer styles.\n                if (data.status === 2) {\n                    $('#custombox-qcm-answer-' + data.cmid + '-' + data.aid).addClass('correct');\n                } else {\n                    $('#custombox-qcm-answer-' + data.cmid + '-' + data.aid).addClass('incorrect');\n                }\n\n                // Lock question if max attempts reached or good answer is given.\n                if (data.locked || (data.status === 2)) {\n                    $('.custombox-qcm-input-' + data.cmid + ' input').prop('disabled', true);\n                    $('#custom-' + data.cmid + 'submit input').prop('disabled', true);\n                }\n            }, 'json');\n        }\n    };\n\n    return customboxquestion;\n\n});"],"names":["define","$","log","cfg","customboxquestion","init","bind","this","submitquestion","debug","cmid","attr","replace","answers","aid","length","first","url","wwwroot","removeClass","get","data","status","addClass","locked","prop"],"mappings":"AAiBAA,8CAAO,CAAC,SAAU,WAAY,gBAAgB,SAASC,EAAGC,IAAKC,YAE3DC,kBAAoB,CAEhBC,KAAM,WACFJ,EAAE,sBAAsBK,KAAK,QAASC,KAAKC,gBAE3CN,IAAIO,MAAM,0CAGdD,eAAgB,eAIRE,KAFOT,EAAEM,MAEGI,KAAK,QAAQC,QAAQ,qBAAsB,IACvDC,QAAUZ,EAAE,wBAA0BS,KAAO,aAE7CI,IAAM,EACND,QAAQE,OAAS,IAEjBD,IADaD,QAAQG,QACRL,KAAK,cAIlBM,IAAMd,IAAIe,QAAU,kDACxBD,KAAO,eACPA,KAAO,SAAWP,KAClBO,KAAO,cAAgBH,IAEvBb,EAAE,yBAA2BS,MAAMS,YAAY,WAC/ClB,EAAE,yBAA2BS,MAAMS,YAAY,aAE/ClB,EAAEmB,IAAIH,KAAK,SAASI,MAEI,IAAhBA,KAAKC,OACLrB,EAAE,yBAA2BoB,KAAKX,KAAO,IAAMW,KAAKP,KAAKS,SAAS,WAElEtB,EAAE,yBAA2BoB,KAAKX,KAAO,IAAMW,KAAKP,KAAKS,SAAS,cAIlEF,KAAKG,QAA2B,IAAhBH,KAAKC,UACrBrB,EAAE,wBAA0BoB,KAAKX,KAAO,UAAUe,KAAK,YAAY,GACnExB,EAAE,WAAaoB,KAAKX,KAAO,gBAAgBe,KAAK,YAAY,MAEjE,UAIJrB,iBAEV"}