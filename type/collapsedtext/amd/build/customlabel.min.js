define("customlabeltype_collapsedtext/customlabel",["jquery","core/log","core/config"],(function($,log,cfg){return customboxcollapsed={init:function(){$(".custombox-collapsedtext-open-all").bind("click",this.openall),$(".custombox-collapsedtext-close-all").bind("click",this.closeall),$(".custombox-collapsedtext-toggle").bind("click",this.togglestate),$(".custombox-collapsedtext-caption").bind("click",this.togglestateproxy),log.debug("AMD customlabel collapsedtext initialized.")},openall:function(){var id=$(this).attr("id").replace("custombox-collapsedtext-open-all-",""),collapsehandleclass=".custombox-collapsedtext-toggle-"+id;$(".custombox-collapsedtext-panel-"+id).removeClass("collapsed"),$(collapsehandleclass+" img").each((function(){var src=$(this).attr("src");$(this).attr("src",src.replace("closed","open"))}));var url=cfg.wwwroot+"/mod/customlabel/type/collapsedtext/ajax/service.php";url+="?what=complete",url+="&cmid="+id,$.get(url)},closeall:function(e){var id=$(this).attr("id").replace("custombox-collapsedtext-close-all-",""),collapsehandleclass=".custombox-collapsedtext-toggle-"+id;$(".custombox-collapsedtext-panel-"+id).addClass("collapsed"),$(collapsehandleclass+" img").each((function(){var src=$(this).attr("src");$(this).attr("src",src.replace("open","closed"))}))},togglestate:function(e){var that=$(this),toggle=that.hasClass("is-toggle"),fullid=that.attr("id").replace("custombox-collapsedtext-toggle-",""),parts=fullid.split("-"),cmid=parts.shift(),itemid=parts.shift(),collapsehandleid="#custombox-collapsedtext-toggle-"+fullid,collapseid="#custombox-collapsedtext-panel-"+fullid,collapsehandleclass=".custombox-collapsedtext-toggle-"+cmid,collapseclass=".custombox-collapsedtext-panel-"+cmid;if(toggle)if($(collapseid).hasClass("collapsed")){$(collapseid).removeClass("collapsed");var src=$(collapsehandleid+" img").attr("src");$(collapsehandleid+" img").attr("src",src.replace("closed","open")),customboxcollapsed.sendcompletion(cmid,itemid)}else{$(collapseid).addClass("collapsed");src=$(collapsehandleid+" img").attr("src");$(collapsehandleid+" img").attr("src",src.replace("open","closed"))}else{$(collapseclass).addClass("collapsed"),$(collapseid).removeClass("collapsed"),customboxcollapsed.sendcompletion(cmid,itemid),$(collapsehandleclass+" img").each((function(){var src=$(this).attr("src");$(this).attr("src",src.replace("open","closed"))}));src=$(collapsehandleid+" img").attr("src");$(collapsehandleid+" img").attr("src",src.replace("closed","open"))}e.preventDefault()},togglestateproxy:function(){var toggleid=$(this).attr("id").replace("custombox-collapsedtext-caption-","custombox-collapsedtext-toggle-");$("#"+toggleid).trigger("click")},sendcompletion:function(cmid,item){var url=cfg.wwwroot+"/mod/customlabel/type/collapsedtext/ajax/service.php";url+="?what=open",url+="&cmid="+cmid,url+="&item="+item,$.get(url)}},customboxcollapsed}));

//# sourceMappingURL=customlabel.min.js.map